<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <link href='../../../assets/images/businesscore-64x64.png' rel='icon'>
    <title>CGC Docs | News Letter 1: IPC</title>
    <link href="../../../assets/stylesheets/application.css" rel="stylesheet" />
  </head>
  <body class='cgc-release-documentation cgc-release-documentation_newsletter cgc-release-documentation_newsletter_ipc cgc-release-documentation_newsletter_ipc_index'>
    <div id='container'>
      <div id='nav_col'>
        <div id='logo'>
          <a href='/'>
            CGC Docs, published by Legitimate Business Syndicate
          </a>
        </div>
        <div id='nav'>
          <ul>
            <li>
              <a href='/'>Welcome</a>
            </li>
            <li class='hdr'>Event-FAQ</li>
            <li>
              <a href='/Event-FAQ/event_faq/'>Event FAQ</a>
            </li>
            <li class='hdr'>cb-testing</li>
            <li>
              <a href='/cb-testing/cb-acceptance/'>cb-acceptance</a>
            </li>
            <li>
              <a href='/cb-testing/cb-replay/'>cb-replay</a>
            </li>
            <li>
              <a href='/cb-testing/cb-replay-pov/'>cb-replay-pov</a>
            </li>
            <li>
              <a href='/cb-testing/cb-test/'>cb-test</a>
            </li>
            <li>
              <a href='/cb-testing/poll-validate/'>poll-validate</a>
            </li>
            <li class='hdr'>cgc-release-documentation/newsletter</li>
            <li>
              <a href='/cgc-release-documentation/newsletter/ipc/'>News Letter 1: IPC</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/newsletter/cpp/'>News Letter 2: C++</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/newsletter/ctf/'>News Letter 3: CTF</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/newsletter/template/'>News Letter X: Template</a>
            </li>
            <li class='hdr'>cgc-release-documentation/walk-throughs</li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/building-a-cb/'>Building a Challenge Binary</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/cgc-repository/'>CGC Repositories</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/debugging-a-cb/'>Debugging a Challenge Binary</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/pin-for-decree/'>Running Intel PIN on DECREE Challenge Binaries</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/running-the-vm/'>Running the Virtual Machine</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/scoring-cbs/'>Scoring a Challenge Binary Set</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/submitting-a-cb/'>Submitting a Challenge Binary</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/testing-a-cb/'>Testing a Challenge Binary</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/understanding-poll-generators/'>Understanding Poll Generators</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/understanding-cfe-povs/'>Understanding Proofs of Vulnerability in CFE</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/using-the-network-appliance/'>Using the Network Appliance</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/virtual-competiton/'>Virtual Competition</a>
            </li>
            <li>
              <a href='/cgc-release-documentation/walk-throughs/ptrace-for-decree/'>Writing an Instruction Tracer for DECREE Challenge Binaries Using ptrace</a>
            </li>
            <li class='hdr'>cgc2elf</li>
            <li>
              <a href='/cgc2elf/cgc2elf/'>cgc2elf</a>
            </li>
            <li class='hdr'>cgcef-verify</li>
            <li>
              <a href='/cgcef-verify/cgcef_verify/'>cgcef_verify</a>
            </li>
            <li class='hdr'>libcgc</li>
            <li>
              <a href='/libcgc/allocate/'>allocate</a>
            </li>
            <li>
              <a href='/libcgc/cgcabi/'>CGC ABI</a>
            </li>
            <li>
              <a href='/libcgc/deallocate/'>deallocate</a>
            </li>
            <li>
              <a href='/libcgc/fdwait/'>fdwait</a>
            </li>
            <li>
              <a href='/libcgc/random/'>random</a>
            </li>
            <li>
              <a href='/libcgc/receive/'>receive</a>
            </li>
            <li>
              <a href='/libcgc/terminate/'>_terminate</a>
            </li>
            <li>
              <a href='/libcgc/transmit/'>transmit</a>
            </li>
            <li class='hdr'>libcgcef</li>
            <li>
              <a href='/libcgcef/cgc_executable_format/'>CGC Executable Format</a>
            </li>
            <li class='hdr'>libpov</li>
            <li>
              <a href='/libpov/libpov/'>libpov</a>
            </li>
            <li>
              <a href='/libpov/type1_negotiate/'>type1_negotiate</a>
            </li>
            <li>
              <a href='/libpov/type2_negotiate/'>type2_negotiate</a>
            </li>
            <li>
              <a href='/libpov/type2_submit/'>type2_submit</a>
            </li>
            <li class='hdr'>network-appliance</li>
            <li>
              <a href='/network-appliance/cb-packet-log/'>cb-packet-log</a>
            </li>
            <li>
              <a href='/network-appliance/cb-proxy/'>cb-proxy</a>
            </li>
            <li>
              <a href='/network-appliance/verify-rules/'>verify-rules</a>
            </li>
            <li class='hdr'>poll-generator</li>
            <li>
              <a href='/poll-generator/generate-polls/'>generate-polls</a>
            </li>
            <li class='hdr'>pov-xml2c</li>
            <li>
              <a href='/pov-xml2c/pov-xml2c/'>pov-xml2c</a>
            </li>
            <li class='hdr'>service-launcher</li>
            <li>
              <a href='/service-launcher/cb-server/'>cb-server</a>
            </li>
            <li class='hdr'>virtual-competition</li>
            <li>
              <a href='/virtual-competition/ti-client/'>ti-client</a>
            </li>
            <li>
              <a href='/virtual-competition/ti-rotate/'>ti-rotate</a>
            </li>
            <li>
              <a href='/virtual-competition/ti-server/'>ti-server</a>
            </li>
          </ul>
        </div>
      </div>
      <div id='main_col'>
        <div id='title'>
          <h1>News Letter 1: IPC</h1>
        </div>
        <div id='content'>
          <h2 id="introduction">Introduction</h2>
          
          <h2 id="background">Background</h2>
          
          <p>One of many challenges in building a representative platform for performing
          security research is mimicking real world challenges
          while reducing the barrier to entry.</p>
          
          <p>One area of research that is oft discussed is inter-process communication
          (IPC).  IPC can be used for a multitude of purposes: to simplify a program,
          to improve performance as well as a security mitigation.  A large barrier to
          entry for analysis of IPC are the complex real world implementation intrinsics.
          DECREE has distilled the IPC implementation down to transmit and receive
          system calls within a brokered environment.  This distillation allow challenge
          binary (CB) authors to replicate many real-word implications of IPC while
          leveraging the existing communication interfaces provided by DECREE.
          The simplification is further intended to allow the research community to
          address the underlying IPC program analysis challenges without the complexities
          of modern operating systems.</p>
          
          <p>The IPC implementation provides a sandbox such that the executables that make
          up the CB are able to inter-communicate in an arbitrary fashion as chosen by
          the CB author. The sandbox precludes the ability to impact any other service
          poll connection, proof of vulnerability connection, or other challenge
          binary process running on that same host.</p>
          
          <h2 id="implementation">Implementation</h2>
          
          <p>IPC is brokered within DECREE via cb-server by allocating allocating a socket
          pair per executable in the set of executables within a CB.  As a starting
          point, a CB made up of a single executable has three sockets provided by
          cb-server:</p>
          
          <div class="highlighter-rouge"><pre class="highlight"><code>0, 1, and 2.&#x000A;</code></pre>
          </div>
          
          <p>These three sockets are used for network receive, network transmit, and
          debugging purposes respectively.  When a CB is made up of more than one
          executable, a file descriptor pair is allocated sequentially starting at 3 and
          incrementing upwards from there.</p>
          
          <p>A CB made up of two executables will have one IPC socket-pair:</p>
          
          <div class="highlighter-rouge"><pre class="highlight"><code>(3, 4) and (5, 6).&#x000A;</code></pre>
          </div>
          
          <p>A CB made up of three executables will have three IPC socket-pairs:</p>
          
          <div class="highlighter-rouge"><pre class="highlight"><code>(3, 4), (5, 6), and (7, 8)&#x000A;</code></pre>
          </div>
          
          <p>The CB author may choose to use these socket-pairs to construct arbitrary
          inter-connections between executables within the CB.  Communication is handled
          via transmit, receive, and fdwait.</p>
          
          <p>All of the allocated file descriptors, including the original sockets for
          communicating over the network and the allocated socket pairs, are available to
          all executables within the CB.  The CB author may leverage these descriptors in
          any fashion within the set of executables.</p>
          
          <p>The executables that make up an instance of the CB is only able to communicate
          via these descriptors to the other executables within the instance and over the
          network.</p>
          
          <p>Within CGC, a reformulated CB must be made up of the same number of executables
          as the original CB.  Reformulated CBs may leverage the allocated file
          descriptors as the CRS chooses.  The efficacy of the communication of
          reformulated CBs will only be verified via the network receive and network
          transmit file descriptors.</p>
          
          <h2 id="examples">Examples</h2>
          
          <h3 id="pipeline">Pipeline</h3>
          
          <p>The Unix pipeline model can be simulated via iteratively leveraging the file
          descriptors serially across the executables that make up the CB.  A three
          process pipeline can be simulated as follows:</p>
          
          <ul>
            <li>CB_1 reads from 0 (network receive) and writes to 3 (CB_2).</li>
            <li>CB_2 reads from 4 (CB_1) and writes to 5 (CB_3).</li>
            <li>CB_3 reads from 6 and (CB_2) writes to 1 (network transmit).</li>
          </ul>
          
          <p>The LUNGE_00003 CB template uses IPC in a fashion similar to the Unix
          pipeline to accomplish the same tasks as the original service-template, but in
          a pipelined fashion.  Input from the network is read from the first CB, passed
          to the second which passes it to the third, which sends output to the network.</p>
          
          <h3 id="communication-broker">Communication Broker</h3>
          
          <p>A brokered communication model can be simulated via a single executable
          managing communication between the other executables that make up the CB.  A
          producer / consumer model can be simulated with two executables as follows:</p>
          
          <ul>
            <li>CB_1 reads from 0 (network receive) and writes to 1 (network transmit). It also writes to 3 (CB_2) and reads from 4 (CB_2).</li>
            <li>CB_2 reads from 3 (CB_1) and writes to 4 (CB_1).</li>
          </ul>
          
          <p>The LUNGE_00004 CB template 'ipc-producer-consumer' uses IPC in a fashion
          similar to the producer consumer model, with all communication with the
          network managed via the first executable, and all processing is managed by
          the second executable.</p>
          
          <h3 id="dynamic-communication-channels">Dynamic Communication Channels</h3>
          
          <p>Communication paths are not required to be static within the context of a CB.
          Dynamically built communication paths are possible with no pre-determined
          order or required setup.</p>
          
          <p>The example CB 'LUNGE_00005' is made up of multiple executables that each
          implement a unique data transformation mechanism but can be configured to read
          and write its output from the network to any of the other executables.  The
          client is responsible for determining how each of the executables are plumbed
          together.</p>
          
          <h2 id="conclusion">Conclusion</h2>
          
          <p>The examples provided here show how IPC within DECREE can provide a rich
          environment for modeling complex challenges within the real world, without
          drastically increasing the barrier to entry for program analysis.</p>
        </div>
      </div>
    </div>
    <footer>
      <div id='impressum'>Published by Legitimate Business Syndicate</div>
      <div id='timestamp'>Built at 2016-05-20T21:28:07Z</div>
      <div>
        <ul>
          <li><a href="https://legitbs.net">Homepage</a></li>
          <li><a href="https://twitter.com/legitbs_ctf">Twitter</a></li>
          <li><a href="https://github.com/legitbs">GitHub</a></li>
          <li><a href="https://github.com/legitbs/cgc-docs">This repo</a></li>
        </ul>
      </div>
    </footer>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="../../../assets/javascripts/application.js"></script>
    <script>
      !function(l,e,g,i,t,b,s){l.GoogleAnalyticsObject=g;l[g]||(l[g]=function(){
      (l[g].q=l[g].q||[]).push(arguments)});l[g].l=+new Date;b=e.createElement(i);
      s=e.getElementsByTagName(i)[0];b.src=t;s.parentNode.insertBefore(b,s)}
      (window,document,'ga','script','//www.google-analytics.com/analytics.js');
      
      ga('create', 'UA-38870141-4', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
